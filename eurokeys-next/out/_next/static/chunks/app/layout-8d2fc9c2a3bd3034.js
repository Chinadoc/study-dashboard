(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{812:function(e,t,r){Promise.resolve().then(r.t.bind(r,7960,23)),Promise.resolve().then(r.bind(r,6276))},6276:function(e,t,r){"use strict";r.d(t,{Providers:function(){return s}});var n=r(7437);r(2265);var i=r(8116);function s(e){let{children:t}=e;return console.log("Providers: Rendering SubscriptionProvider"),(0,n.jsx)(i.q,{children:t})}},8116:function(e,t,r){"use strict";r.d(t,{P:function(){return u},q:function(){return o}});var n=r(7437),i=r(2265);let s=(0,i.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,i.useState)([]),[u,a]=(0,i.useState)(!0),[c,l]=(0,i.useState)(null),d=async()=>{a(!0),l(null);try{let e=await fetch("".concat("https://aski.eurokeys.app/api/user","/tool-subscriptions"));if(!e.ok)throw Error("Failed to fetch subscriptions");let t=await e.json();o(t),localStorage.setItem("eurokeys_user_subscriptions",JSON.stringify(t))}catch(e){console.error("Error fetching subscriptions:",e),l("Could not load subscriptions. Using cached data if available.");{let e=localStorage.getItem("eurokeys_user_subscriptions");e&&o(JSON.parse(e))}}finally{a(!1)}};return(0,i.useEffect)(()=>{d()},[]),(0,n.jsx)(s.Provider,{value:{subscriptions:r,loading:u,error:c,refreshSubscriptions:d,getSubscriptionStatus:e=>{let t=r.find(t=>t.name.toLowerCase().includes(e.toLowerCase()));if(!t)return{status:"none",daysLeft:0,text:"Not Found"};let n=new Date;n.setHours(0,0,0,0);let i=Math.ceil((new Date(t.expirationDate).getTime()-n.getTime())/864e5),s="active",o="Active";return i<0?(s="expired",o="Expired"):0===i?(s="warning",o="Due Today"):i<=30?(s="warning",o="".concat(i," days left")):o="".concat(i," days remaining"),{status:s,daysLeft:i,text:o}}},children:t})},u=()=>{let e=(0,i.useContext)(s);if(void 0===e)throw Error("useSubscriptions must be used within a SubscriptionProvider");return e}},7960:function(){}},function(e){e.O(0,[587,971,117,744],function(){return e(e.s=812)}),_N_E=e.O()}]);