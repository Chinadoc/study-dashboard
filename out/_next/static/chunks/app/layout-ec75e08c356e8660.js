(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{4325:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a,d:()=>n});var s=r(5155),i=r(2115);let o=(0,i.createContext)(void 0),n=e=>{let{children:t}=e,[r,n]=(0,i.useState)([]),[a,u]=(0,i.useState)(!0),[c,l]=(0,i.useState)(null),d=async()=>{u(!0),l(null);try{let e=await fetch("".concat("https://aski.eurokeys.app/api/user","/tool-subscriptions"));if(!e.ok)throw Error("Failed to fetch subscriptions");let t=await e.json();n(t),localStorage.setItem("eurokeys_user_subscriptions",JSON.stringify(t))}catch(e){console.error("Error fetching subscriptions:",e),l("Could not load subscriptions. Using cached data if available.");{let e=localStorage.getItem("eurokeys_user_subscriptions");e&&n(JSON.parse(e))}}finally{u(!1)}};return(0,i.useEffect)(()=>{d()},[]),(0,s.jsx)(o.Provider,{value:{subscriptions:r,loading:a,error:c,refreshSubscriptions:d,getSubscriptionStatus:e=>{let t=r.find(t=>t.name.toLowerCase().includes(e.toLowerCase()));if(!t)return{status:"none",daysLeft:0,text:"Not Found"};let s=new Date;s.setHours(0,0,0,0);let i=Math.ceil((new Date(t.expirationDate).getTime()-s.getTime())/864e5),o="active",n="Active";return i<0?(o="expired",n="Expired"):0===i?(o="warning",n="Due Today"):i<=30?(o="warning",n="".concat(i," days left")):n="".concat(i," days remaining"),{status:o,daysLeft:i,text:n}}},children:t})},a=()=>{let e=(0,i.useContext)(o);if(void 0===e)throw Error("useSubscriptions must be used within a SubscriptionProvider");return e}},6646:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9324,23)),Promise.resolve().then(r.bind(r,8423))},8423:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>o});var s=r(5155);r(2115);var i=r(4325);function o(e){let{children:t}=e;return(0,s.jsx)(i.d,{children:t})}},9324:()=>{}},e=>{e.O(0,[533,441,964,358],()=>e(e.s=6646)),_N_E=e.O()}]);