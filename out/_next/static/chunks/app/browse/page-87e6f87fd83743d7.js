(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},8970:(e,t,a)=>{Promise.resolve().then(a.bind(a,9167))},9167:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(5155),s=a(2115),n=a(5695);let l=e=>{let{title:t,stepNumber:a,isActive:s,isDisabled:n,children:l}=e;return(0,r.jsxs)("div",{className:"\n                p-6 rounded-2xl border transition-all duration-300 backdrop-blur-md\n                ".concat(s?"border-purple-500/60 shadow-[0_0_30px_rgba(139,92,246,0.2)] bg-purple-500/5":"border-white/10 bg-white/5","\n                ").concat(n?"opacity-50 pointer-events-none":"opacity-100","\n            "),children:[(0,r.jsxs)("div",{className:"text-[10px] font-bold uppercase tracking-widest text-purple-400 mb-4",children:["Step ",a,": ",t]}),(0,r.jsx)("div",{className:"flex flex-col gap-2 max-h-[300px] overflow-y-auto custom-scrollbar",children:l})]})},o=e=>{let{label:t,isSelected:a,onClick:s}=e;return(0,r.jsx)("div",{onClick:s,className:"\n                px-4 py-3 rounded-lg cursor-pointer transition-all duration-200 border\n                ".concat(a?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-medium border-transparent":"bg-transparent text-gray-300 border-transparent hover:bg-purple-500/10 hover:border-white/10","\n            "),children:t})},c="https://euro-keys.jeremy-samuels17.workers.dev";function i(){let e=(0,n.useRouter)(),[t,a]=(0,s.useState)([]),[i,d]=(0,s.useState)([]),[u,m]=(0,s.useState)([]),[p,h]=(0,s.useState)(null),[x,f]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[v,g]=(0,s.useState)(!1),[w,j]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{!async function(){g(!0);try{let e=await fetch("".concat(c,"/api/master?fields=make&limit=2000")),t=await e.json(),r=t.rows||t.results||[],s=Array.from(new Set(r.map(e=>e.make))).filter(e=>e).sort();a(s)}catch(e){console.error("Failed to fetch makes:",e)}finally{g(!1)}}()},[]),(0,s.useEffect)(()=>{if(!p)return void d([]);!async function(){j(!0);try{let e=await fetch("".concat(c,"/api/master?make=").concat(encodeURIComponent(p),"&fields=model&limit=1000")),t=await e.json(),a=t.rows||t.results||[],r=Array.from(new Set(a.map(e=>e.model))).filter(e=>e).sort();d(r)}catch(e){console.error("Failed to fetch models:",e)}finally{j(!1)}}()},[p]),(0,s.useEffect)(()=>{if(!x||!p)return void m([]);!async function(){k(!0);try{let e=await fetch("".concat(c,"/api/master?make=").concat(encodeURIComponent(p),"&model=").concat(encodeURIComponent(x),"&fields=year_start,year_end&limit=100")),t=await e.json(),a=t.rows||t.results||[],r=new Set;a.forEach(e=>{let t=e.year_start||2015,a=e.year_end||e.year_start||2024;for(let e=t;e<=a;e++)r.add(e)});let s=Array.from(r).sort((e,t)=>t-e);m(s)}catch(e){console.error("Failed to fetch years:",e)}finally{k(!1)}}()},[x,p]),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("header",{className:"text-center mb-12",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 to-indigo-500 bg-clip-text text-transparent mb-2",children:"EuroKeys Search"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Instant access to vehicles, FCC IDs, and procedures"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[(0,r.jsx)(l,{title:"Make",stepNumber:1,isActive:!p,isDisabled:!1,children:v?(0,r.jsx)("div",{className:"p-4 text-center text-purple-400 animate-pulse",children:"Loading makes..."}):t.map(e=>(0,r.jsx)(o,{label:e,isSelected:p===e,onClick:()=>{h(e),f(null),y(null)}},e))}),(0,r.jsx)(l,{title:"Model",stepNumber:2,isActive:!!p&&!x,isDisabled:!p,children:p?w?(0,r.jsx)("div",{className:"p-4 text-center text-purple-400 animate-pulse",children:"Loading models..."}):i.map(e=>(0,r.jsx)(o,{label:e,isSelected:x===e,onClick:()=>{f(e),y(null)}},e)):(0,r.jsx)("div",{className:"p-8 text-center text-gray-500 italic text-sm",children:"Select a make first"})}),(0,r.jsx)(l,{title:"Year",stepNumber:3,isActive:!!x&&!b,isDisabled:!x,children:x?N?(0,r.jsx)("div",{className:"p-4 text-center text-purple-400 animate-pulse",children:"Loading years..."}):u.map(e=>(0,r.jsx)(o,{label:e,isSelected:b===e,onClick:()=>y(e)},e)):(0,r.jsx)("div",{className:"p-8 text-center text-gray-500 italic text-sm",children:"Select a model first"})})]}),(0,r.jsx)("div",{className:"transition-all duration-500 overflow-hidden ".concat(b?"max-h-24 opacity-100":"max-h-0 opacity-0"),children:(0,r.jsxs)("button",{onClick:()=>{p&&x&&b&&e.push("/vehicle/".concat(encodeURIComponent(p),"/").concat(encodeURIComponent(x),"/").concat(b))},className:"w-full max-w-md mx-auto block px-8 py-4 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-400 hover:to-teal-500 text-white font-bold rounded-2xl shadow-lg shadow-emerald-500/20 transition-all hover:-translate-y-1 active:scale-95 text-center",children:["View ",b," ",p," ",x," â†’"]})}),(0,r.jsx)("div",{className:"mt-12 text-center",children:(0,r.jsx)("a",{href:"/",className:"text-gray-500 hover:text-purple-400 transition-colors text-sm",children:"â† Back to Dashboard"})})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=8970)),_N_E=e.O()}]);