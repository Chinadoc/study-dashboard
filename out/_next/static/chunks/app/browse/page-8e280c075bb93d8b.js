(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},8599:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(5155),o=a(2115),l=a(5695);let s=e=>{let{title:t,stepNumber:a,isActive:o,isDisabled:l,children:s}=e;return(0,r.jsxs)("div",{className:"\n                p-6 rounded-2xl border transition-all duration-300 backdrop-blur-md\n                ".concat(o?"border-purple-500/60 shadow-[0_0_30px_rgba(139,92,246,0.2)] bg-purple-500/5":"border-white/10 bg-white/5","\n                ").concat(l?"opacity-50 pointer-events-none":"opacity-100","\n            "),children:[(0,r.jsxs)("div",{className:"text-[10px] font-bold uppercase tracking-widest text-purple-400 mb-4",children:["Step ",a,": ",t]}),(0,r.jsx)("div",{className:"flex flex-col gap-2 max-h-[300px] overflow-y-auto custom-scrollbar",children:s})]})},n=e=>{let{label:t,isSelected:a,onClick:o}=e;return(0,r.jsx)("div",{onClick:o,className:"\n                px-4 py-3 rounded-lg cursor-pointer transition-all duration-200 border\n                ".concat(a?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-medium border-transparent":"bg-transparent text-gray-300 border-transparent hover:bg-purple-500/10 hover:border-white/10","\n            "),children:t})},c=["Acura","Audi","BMW","Buick","Cadillac","Chevrolet","Chrysler","Dodge","Fiat","Ford","GMC","Honda","Hyundai","Infiniti","Jaguar","Jeep","Kia","Land Rover","Lexus","Lincoln","Mazda","Mercedes-Benz","Mini","Mitsubishi","Nissan","Porsche","Ram","Subaru","Toyota","Volkswagen","Volvo"],i={Acura:"acura.com",Audi:"audi.com",BMW:"bmw.com",Buick:"buick.com",Cadillac:"cadillac.com",Chevrolet:"chevrolet.com",Chrysler:"chrysler.com",Dodge:"dodge.com",Fiat:"fiat.com",Ford:"ford.com",GMC:"gmc.com",Honda:"honda.com",Hyundai:"hyundai.com",Infiniti:"infiniti.com",Jaguar:"jaguar.com",Jeep:"jeep.com",Kia:"kia.com","Land Rover":"landrover.com",Lexus:"lexus.com",Lincoln:"lincoln.com",Mazda:"mazdausa.com","Mercedes-Benz":"mbusa.com",Mini:"miniusa.com",Mitsubishi:"mitsubishicars.com",Nissan:"nissanusa.com",Porsche:"porsche.com",Ram:"ramtrucks.com",Subaru:"subaru.com",Toyota:"toyota.com",Volkswagen:"vw.com",Volvo:"volvocars.com"},d={Acura:"#E82C2A",Audi:"#BB0A30",BMW:"#0066B1",Buick:"#FF6600",Cadillac:"#A63328",Chevrolet:"#CD9834",Chrysler:"#003DA5",Dodge:"#D61F26",Fiat:"#8E0C3A",Ford:"#003478",GMC:"#D71920",Honda:"#D80027",Hyundai:"#002C5F",Infiniti:"#000000",Jaguar:"#005A31",Jeep:"#FFBA00",Kia:"#BB162B","Land Rover":"#005A2C",Lexus:"#5A5A5A",Lincoln:"#003058",Mazda:"#101010","Mercedes-Benz":"#000000",Mini:"#000000",Mitsubishi:"#E60012",Nissan:"#C3002F",Porsche:"#B12B28",Ram:"#111111",Subaru:"#0047BB",Toyota:"#EB0A1E",Volkswagen:"#001E50",Volvo:"#003057"};function m(e){let{make:t,isSelected:a,onClick:l}=e,[s,n]=(0,o.useState)(!1),c=function(e){let t=i[e]||"".concat(e.toLowerCase().replace(/\s/g,""),".com");return"https://cdn.brandfetch.io/".concat(t,"/w/256/h/256")}(t),m=d[t]||"#8b5cf6",u=t.substring(0,2).toUpperCase();return(0,r.jsxs)("button",{onClick:l,className:"\n                flex flex-col items-center justify-center gap-2 p-4\n                rounded-xl border transition-all duration-200 cursor-pointer\n                ".concat(a?"border-purple-500 bg-purple-500/10 ring-2 ring-purple-500/50":"border-gray-700 bg-gray-800/50 hover:border-purple-400 hover:bg-gray-800","\n            "),children:[s?(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:m},children:u}):(0,r.jsx)("img",{src:c,alt:t,className:"w-12 h-12 object-contain rounded-full bg-white p-1",onError:()=>n(!0)}),(0,r.jsx)("span",{className:"text-sm text-gray-300 font-medium text-center",children:t})]})}function u(e){let{makes:t,selectedMake:a,onSelect:o}=e;return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("h3",{className:"text-center text-gray-400 font-semibold mb-6",children:"Or Select a Make"}),(0,r.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 gap-3",children:t.map(e=>(0,r.jsx)(m,{make:e,isSelected:a===e,onClick:()=>o(e)},e))})]})}let p="https://euro-keys.jeremy-samuels17.workers.dev";function h(e){let{onSearch:t,placeholder:a="Search by Year/Make/Model/VIN..."}=e,[s,n]=(0,o.useState)(""),[c,i]=(0,o.useState)([]),[d,m]=(0,o.useState)([]),[u,h]=(0,o.useState)(!1),[x,g]=(0,o.useState)(!1),[b,f]=(0,o.useState)(-1),y=(0,o.useRef)(null),v=(0,o.useRef)(null),w=(0,l.useRouter)();(0,o.useEffect)(()=>{!async function(){try{let e=await fetch("".concat(p,"/api/vyp/makes")),t=await e.json();m(t.makes||[])}catch(e){console.error("Failed to fetch makes:",e)}}()},[]),(0,o.useEffect)(()=>{if(!s.trim()||s.length<2){i([]),g(!1);return}let e=setTimeout(async()=>{h(!0);let e=[],t=s.toLowerCase().trim();try{let a=d.filter(e=>e.toLowerCase().includes(t)).slice(0,5);a.forEach(t=>{e.push({type:"make",make:t,display:t})});let r=d.find(e=>e.toLowerCase()===t),o=r||1!==a.length?null:a[0],l=r||o;if(l){let t=await fetch("".concat(p,"/api/vyp/models?make=").concat(encodeURIComponent(l)));((await t.json()).models||[]).slice(0,5).forEach(t=>{e.push({type:"model",make:l,model:t,display:"".concat(l," ").concat(t)})})}else if(0===a.length)try{let a=await fetch("".concat(p,"/api/search/models?q=").concat(encodeURIComponent(t)));((await a.json()).results||[]).slice(0,6).forEach(t=>{e.push({type:"model",make:t.make,model:t.model,display:"".concat(t.make," ").concat(t.model)})})}catch(e){console.log("Global model search error:",e)}let s=e.filter((e,t,a)=>t===a.findIndex(t=>t.display===e.display));i(s.slice(0,8)),g(s.length>0),f(-1)}catch(a){console.error("Search error:",a);let e=d.filter(e=>e.toLowerCase().includes(t)).slice(0,8);i(e.map(e=>({type:"make",make:e,display:e}))),g(e.length>0)}finally{h(!1)}},200);return()=>clearTimeout(e)},[s,d]),(0,o.useEffect)(()=>{let e=e=>{y.current&&!y.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let j=e=>{"make"===e.type?window.location.href="/browse?make=".concat(encodeURIComponent(e.make)):"model"===e.type&&e.model?window.location.href="/browse?make=".concat(encodeURIComponent(e.make),"&model=").concat(encodeURIComponent(e.model)):"vehicle"===e.type&&e.make&&e.model&&e.year&&w.push("/vehicle/".concat(encodeURIComponent(e.make),"/").concat(encodeURIComponent(e.model),"/").concat(e.year)),g(!1),n("")},k=()=>{b>=0&&c[b]?j(c[b]):s.trim()&&(t(s),g(!1))};return(0,r.jsxs)("div",{className:"w-full max-w-2xl mx-auto mb-8 relative",ref:y,children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{ref:v,type:"text",value:s,onChange:e=>n(e.target.value),onKeyDown:e=>{"ArrowDown"===e.key?(e.preventDefault(),f(e=>Math.min(e+1,c.length-1))):"ArrowUp"===e.key?(e.preventDefault(),f(e=>Math.max(e-1,-1))):"Enter"===e.key?(e.preventDefault(),k()):"Escape"===e.key&&g(!1)},onFocus:()=>c.length>0&&g(!0),placeholder:a,className:" w-full px-6 py-4 pl-12 bg-gray-800/80 border border-gray-600 rounded-full text-gray-100 placeholder-gray-400 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/30 transition-all duration-200 text-lg "}),(0,r.jsxs)("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.jsx)("path",{d:"M21 21l-4.35-4.35"})]}),u&&(0,r.jsx)("div",{className:"absolute right-20 top-1/2 -translate-y-1/2",children:(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}),s&&!u&&(0,r.jsx)("button",{onClick:()=>{n(""),i([]),g(!1)},className:"absolute right-16 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200 transition-colors",children:"✕"}),(0,r.jsx)("button",{onClick:k,className:" absolute right-2 top-1/2 -translate-y-1/2 px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white font-semibold rounded-full transition-colors duration-200 ",children:"Go"})]}),x&&c.length>0&&(0,r.jsx)("div",{className:" absolute top-full left-0 right-0 mt-2 bg-gray-800/95 backdrop-blur-md border border-gray-700 rounded-2xl shadow-2xl shadow-black/50 overflow-hidden z-50 ",children:c.map((e,t)=>(0,r.jsxs)("button",{onClick:()=>j(e),className:"\n                                w-full px-5 py-3 flex items-center gap-4 text-left\n                                transition-colors duration-150\n                                ".concat(t===b?"bg-purple-600/30 text-white":"hover:bg-gray-700/50 text-gray-200","\n                                ").concat(t!==c.length-1?"border-b border-gray-700/50":"","\n                            "),children:[(0,r.jsx)("span",{className:"\n                                w-8 h-8 rounded-lg flex items-center justify-center text-sm\n                                ".concat("make"===e.type?"bg-purple-500/20 text-purple-400":"model"===e.type?"bg-blue-500/20 text-blue-400":"bg-emerald-500/20 text-emerald-400","\n                            "),children:"make"===e.type?"\uD83C\uDFED":"model"===e.type?"\uD83D\uDE99":"\uD83D\uDE97"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium",children:e.display}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:"make"===e.type?"View all models":"model"===e.type?"View years":"View details"})]}),(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},"".concat(e.type,"-").concat(e.display)))})]})}let x="https://euro-keys.jeremy-samuels17.workers.dev";function g(){var e,t;let a=(0,l.useRouter)(),i=(0,l.useSearchParams)(),d=null!=(e=null==i?void 0:i.get("make"))?e:null,m=null!=(t=null==i?void 0:i.get("model"))?t:null,[p,g]=(0,o.useState)([]),[b,f]=(0,o.useState)([]),[y,v]=(0,o.useState)([]),[w,j]=(0,o.useState)(d),[k,N]=(0,o.useState)(m),[C,S]=(0,o.useState)(null),[B,M]=(0,o.useState)(!1),[R,D]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{!async function(){try{let e=await fetch("".concat(x,"/api/vyp/makes")),t=(await e.json()).makes||[],a=[...new Set([...c,...t])];g(a)}catch(e){console.error("Failed to fetch makes:",e),g([...c])}}()},[]),(0,o.useEffect)(()=>{if(!w)return void f([]);!async function(){M(!0);try{let e=await fetch("".concat(x,"/api/vyp/models?make=").concat(encodeURIComponent(w))),t=(await e.json()).models||[];f(t)}catch(e){console.error("Failed to fetch models:",e)}finally{M(!1)}}()},[w]),(0,o.useEffect)(()=>{if(!k||!w)return void v([]);!async function(){D(!0);try{let e=await fetch("".concat(x,"/api/vyp/years?make=").concat(encodeURIComponent(w),"&model=").concat(encodeURIComponent(k))),t=((await e.json()).years||[]).map(e=>"number"==typeof e?e:e.year).filter(Boolean);v(t)}catch(e){console.error("Failed to fetch years:",e)}finally{D(!1)}}()},[k,w]),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("header",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 to-indigo-500 bg-clip-text text-transparent mb-2",children:"Browse Database"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Access professional locksmith data, programming guides, and part numbers."})]}),(0,r.jsx)(h,{onSearch:e=>{console.log("Search:",e);let t=e.trim().split(/\s+/);t.length>=3&&t[0].match(/^\d{4}$/)&&a.push("/vehicle/".concat(encodeURIComponent(t[1]),"/").concat(encodeURIComponent(t.slice(2).join(" ")),"/").concat(t[0]))}}),w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsx)("button",{onClick:()=>{j(null),N(null),S(null)},className:"text-gray-400 hover:text-purple-400 transition-colors",children:"← Back to Makes"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:w})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,r.jsx)(s,{title:"Model",stepNumber:2,isActive:!k,isDisabled:!1,children:B?(0,r.jsx)("div",{className:"p-4 text-center text-purple-400 animate-pulse",children:"Loading models..."}):b.map(e=>(0,r.jsx)(n,{label:e,isSelected:k===e,onClick:()=>{N(e),S(null)}},e))}),(0,r.jsx)(s,{title:"Year",stepNumber:3,isActive:!!k&&!C,isDisabled:!k,children:k?R?(0,r.jsx)("div",{className:"p-4 text-center text-purple-400 animate-pulse",children:"Loading years..."}):y.map(e=>(0,r.jsx)(n,{label:e,isSelected:C===e,onClick:()=>S(e)},e)):(0,r.jsx)("div",{className:"p-8 text-center text-gray-500 italic text-sm",children:"Select a model first"})}),(0,r.jsxs)("div",{className:"\n                                p-6 rounded-2xl border transition-all duration-300 backdrop-blur-md\n                                ".concat(C?"border-emerald-500/60 shadow-[0_0_30px_rgba(16,185,129,0.2)] bg-emerald-500/5":"border-white/10 bg-white/5","\n                            "),children:[(0,r.jsx)("div",{className:"text-[10px] font-bold uppercase tracking-widest text-emerald-400 mb-4",children:"Preview"}),C?(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-br from-white/5 to-white/10 border border-white/10",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-white mb-1",children:[C," ",w]}),(0,r.jsx)("div",{className:"text-xl text-purple-300 font-medium",children:k})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-center",children:[(0,r.jsxs)("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 uppercase",children:"Keys"}),(0,r.jsx)("div",{className:"text-lg font-bold text-purple-400",children:"—"})]}),(0,r.jsxs)("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 uppercase",children:"Remotes"}),(0,r.jsx)("div",{className:"text-lg font-bold text-purple-400",children:"—"})]})]}),(0,r.jsx)("button",{onClick:()=>{w&&k&&C&&a.push("/vehicle/".concat(encodeURIComponent(w),"/").concat(encodeURIComponent(k),"/").concat(C))},className:"w-full px-6 py-4 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-400 hover:to-teal-500 text-white font-bold rounded-xl shadow-lg shadow-emerald-500/30 transition-all hover:-translate-y-1 hover:shadow-emerald-500/40 active:scale-95 text-center text-lg",children:"Go →"})]}):k?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[200px] text-center",children:[(0,r.jsx)("div",{className:"text-4xl mb-4 opacity-30",children:"\uD83D\uDCC5"}),(0,r.jsx)("div",{className:"text-gray-500 text-sm",children:"Select a year to preview"})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[200px] text-center",children:[(0,r.jsx)("div",{className:"text-4xl mb-4 opacity-30",children:"\uD83D\uDE97"}),(0,r.jsx)("div",{className:"text-gray-500 text-sm",children:"Select model and year to see preview"})]})]})]})]}):(0,r.jsx)(u,{makes:p.length>0?p:c,selectedMake:w,onSelect:e=>{j(e),N(null),S(null)}}),(0,r.jsx)("div",{className:"mt-12 text-center",children:(0,r.jsx)("a",{href:"/",className:"text-gray-500 hover:text-purple-400 transition-colors text-sm",children:"← Back to Dashboard"})})]})}function b(){return(0,r.jsx)(o.Suspense,{fallback:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 text-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 to-indigo-500 bg-clip-text text-transparent mb-8",children:"Browse Database"}),(0,r.jsx)("div",{className:"text-purple-400 animate-pulse",children:"Initializing browser environment..."})]}),children:(0,r.jsx)(g,{})})}},8970:(e,t,a)=>{Promise.resolve().then(a.bind(a,8599))}},e=>{e.O(0,[441,964,358],()=>e(e.s=8970)),_N_E=e.O()}]);